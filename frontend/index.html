<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Key Frames</title>
        <meta
            name="description"
            content="A research assistant powered by GPT-4"
        />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="./static/favicon.ico" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap"
            rel="stylesheet"
        />
        <link
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="/site/styles.css" />
        <style>
            .avatar {
                width: 60px;
                height: 60px;
                border-radius: 50%;
            }

            .agent-name {
                text-align: center;
            }

            .agent-item {
                display: flex;
                flex-direction: column;
                align-items: center;
            }

            .agent-choices {
                display: none;
            }

            .btn-show {
                display: none;
            }
        </style>
    </head>

    <body>
        <section class="landing">
            <div class="max-w-5xl mx-auto text-center">
                <h1 class="text-4xl font-extrabold mx-auto lg:text-7xl">
                    Say Goodbye to <br />
                    <span
                        style="
                            background-image: linear-gradient(
                                to right,
                                #9867f0,
                                #ed4e50
                            );
                            -webkit-background-clip: text;
                            -webkit-text-fill-color: transparent;
                        "
                        >Taking Notes</span
                    >
                </h1>
                <p
                    class="max-w-5xl mx-auto text-gray-600 mt-8"
                    style="font-size: 20px"
                ></p>
                <a href="#form" class="btn btn-primary">Get Started</a>
            </div>
        </section>

        <main class="container" id="form">
            <div class="agent-item">
                <img
                    src="/static/defaultAgentAvatar.JPG"
                    class="avatar"
                    alt="Auto Agent"
                />
            </div>
            <form
                id="videoUploadForm"
                enctype="multipart/form-data"
                class="mt-3"
                onsubmit="GPTResearcher.startResearch(); return false;"
            >
                <div class="form-group">
                    <label for="videoInput" class="agent-question"
                        >Video?</label
                    >
                    <input
                        class="form-control"
                        type="file"
                        id="videoInput"
                        name="video"
                        accept="video/*"
                        required
                    />
                    {#
                    <script>
                        // Get the form element
                        const form = document.getElementById("videoUploadForm");

                        // Add event listener for form submission
                        form.addEventListener("submit", function (event) {
                            event.preventDefault(); // Prevent the default form submission

                            // Get the file input element
                            const fileInput =
                                document.getElementById("videoInput");

                            // Get the selected video file
                            const videoFile = fileInput.files[0];

                            // Create a FormData object to hold the video file
                            const formData = new FormData();
                            formData.append("video", videoFile);

                            // Send the video file using fetch API
                            fetch("http://127.0.0.1:8000/upload", {
                                // Replace with your FastAPI URL
                                method: "POST",
                                body: formData,
                            })
                                .then((response) => response.json()) // Parse JSON response
                                .then((data) => {
                                    // Display a success message or handle the response data as needed
                                    console.log(data);
                                })
                                .catch((error) => {
                                    // Display an error message or handle the error as needed
                                    document.getElementById(
                                        "uploadStatus"
                                    ).innerText = "Failed to upload video.";
                                    console.error(
                                        "Error uploading video:",
                                        error
                                    );
                                });
                        });
                    </script>
                    #}
                </div>
                <div class="form-group">
                    <div class="row"></div>
                    <button
                        type="button"
                        id="btnShowAuto"
                        class="btn btn-secondary mt-3 btn-show"
                    >
                        Auto Agent
                    </button>
                </div>
                <input
                    type="submit"
                    value="Research"
                    class="btn btn-primary button-padding"
                />
            </form>

            <div class="margin-div">
                <h2>Agent Output</h2>
                <div id="output"></div>
            </div>
            <div class="margin-div">
                <h2>Research Report</h2>
                <div id="reportContainer"></div>
                <div id="reportActions">
                    <div
                        class="alert alert-info"
                        role="alert"
                        id="status"
                    ></div>
                    <a
                        id="copyToClipboard"
                        onclick="GPTResearcher.copyToClipboard()"
                        class="btn btn-secondary mt-3"
                        style="margin-right: 10px"
                        >Copy to clipboard</a
                    >
                    <a
                        id="downloadLink"
                        href="#"
                        class="btn btn-secondary mt-3"
                        style="margin-right: 10px"
                        target="_blank"
                        >Download as PDF</a
                    >
                    <a
                        id="downloadLinkWord"
                        href="#"
                        class="btn btn-secondary mt-3"
                        target="_blank"
                        >Download as Docx</a
                    >
                </div>
            </div>
        </main>

        <footer>
            <p>
                GPT Researcher &copy; 2024 |
                <a
                    target="_blank"
                    href="https://github.com/assafelovic/gpt-researcher"
                    >GitHub Page</a
                >
            </p>
        </footer>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.1/showdown.min.js"></script>
        <script src="/site/scripts.js"></script>
        <script>
            // const btnChoose = document.getElementById('btnChoose');
            const btnShowAuto = document.getElementById("btnShowAuto");
            const autoAgentDiv = document.getElementById("autoAgentDiv");
            const agentChoices =
                document.getElementsByClassName("agent-choices");

            /**
    btnChoose.addEventListener('click', function () {
        btnShowAuto.style.display = 'inline-block';
        btnChoose.style.display = 'none';
        autoAgentDiv.style.display = 'none';
        agentChoices[0].style.display = 'flex';
    });
    **/

            btnShowAuto.addEventListener("click", function () {
                btnShowAuto.style.display = "none";
                btnChoose.style.display = "inline-block";
                autoAgentDiv.style.display = "flex";
                agentChoices[0].style.display = "none";
            });
        </script>
    </body>
</html>
